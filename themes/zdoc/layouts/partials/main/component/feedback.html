<div class="docs-feedback">
    <div class="docs-feedback--title">
        <h3>Was this page helpful?</h3>
    </div>

    <div class="docs-feedback--opinion">
        <button id="like-btn" type="button" data-doc="{{ .File.Path }}" data-action="like" title="Yes">
        </button>
        <button id="dislike-btn"  type="button" data-doc="{{ .File.Path }}" data-action="dislike" title="No">
        </button>
    </div>

    <div class="docs-feedback--result" id="opinion-like">
        <h4>Thanks for your feedback!</h4>
        <div class="cards">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Chat with us</h5>
                    <p class="card-text">
                        Join several channels and have access to 1-on-1 communication with members of R3's team and online community.
                    </p>
                </div>
                <div class="card-footer">
                    <a href="http://slack.corda.net/" target="_blank" class="btn rounded" >Chat with us {{ partial "svgs/external.svg" (dict "width" 15 "height" 14) }}</a>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Contribute to docs</h5>
                    <p class="card-text">
                        Noticed any outdated snippets or some code which doesn't reflect the latest code? Help us update the docs.
                    </p>
                </div>
                <div class="card-footer">
                    <a href="{{ .Site.Params.github }}/blob/master/content/en/{{ .File.Path }}" target="_blank" class="btn rounded" >Propose updates {{ partial "svgs/external.svg" (dict "width" 15 "height" 14) }}</a>
                </div>
            </div>
        </div>
    </div>

    <div class="docs-feedback--result" id="opinion-dislike">
        <h4>We're sorry this page wasn't helpful. Let us know how we can make it better!</h4>
        <div class="cards">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Submit a ticket</h5>
                    <p class="card-text">
                        Didnâ€™t find what you are looking for? Sign in or register to submit a support ticket.
                    </p>
                </div>
                <div class="card-footer">
                    <a href="https://developer.r3.com/" target="_blank" class="btn rounded" >Get support {{ partial "svgs/external.svg" (dict "width" 15 "height" 14) }}</a>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Chat with us</h5>
                    <p class="card-text">
                        Come say hello! Live chat with the R3 developer community on Slack now.
                    </p>
                </div>
                <div class="card-footer">
                    <a href="http://slack.corda.net/" target="_blank" class="btn rounded" >Chat with us {{ partial "svgs/external.svg" (dict "width" 15 "height" 14) }}</a>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Join the forum</h5>
                    <p class="card-text">
                        Connect with R3 developers and enthusiasts through our online forum.
                    </p>
                </div>
                <div class="card-footer">
                    <a href="https://community.r3.com/" target="_blank" class="btn rounded long-url" >Community forum {{ partial "svgs/external.svg" (dict "width" 15 "height" 14) }}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var likeBtn = document.getElementById("like-btn");
    var dislikeBtn = document.getElementById("dislike-btn");

    var handleFeedback = function(element){
        var announce = (element.dataset.action === 'like') ? 'opinion-like': 'opinion-dislike';
        document.getElementById(announce).classList.add('show');

        var opposite = (element.dataset.action === 'like') ? 'opinion-dislike' : 'opinion-like';
        document.getElementById(opposite).classList.remove('show');

        if (ga){
            ga('send', 'event', 'Feedback', element.dataset.action, element.dataset.doc);
        }
        else{
            console.error('Google Analytic not found');
        }
    }

    likeBtn.onclick = function (){
        handleFeedback(likeBtn);
    };

    dislikeBtn.onclick = function (){
        handleFeedback(dislikeBtn);
    };

</script>
